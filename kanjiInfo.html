<!DOCTYPE html>
<html>
  <!--<meta charset="UTF-8"><!--try with and without this one, something was funky-->
<head>

  <meta charset="UTF-8">
  <meta name="viewport", content = "width=device-width, initial-scale=1.0">
  <title>Jouyou Kanji Info</title>
  
  <style>
    .bold{
	  font-weight: bold;
	}
    .big {
	  font-size:30px;
	}
    .inset {
	  border-style: inset;
	}
	.center {
	  display: flex;
	  justify-content: center;
	  align-items: center; 
	}
  </style>
  
</head>


<body onload="setup()"><!--is this best practice or?-->

  <script src="data.js" lang='ja' enctype='utf-8'></script><!--this was easier than fiddling with an actual json file!-->
  
  <div style='width:400px'>
	  <div class="center" style='padding-bottom:15px'>
		<input type="button" value="<" onclick="left()">
		<input type="text" id="input">
		<input type="button" value=">" onclick="right()">
	  </div>
	  
	  <div class="center" style='padding-bottom:15px'>
	    <div id='jisho-link' style='padding-right:15px'></div>
		<input type="button" value="Search" onclick="search()">
		<div style='padding-left:15px'>
		<A class='center bold' href="./index.html">home</A>
		</div>
	  </div>
	  
	  <div class='center'>
		<div id='kanji-disp' class='big inset'></div>
	  </div>
	  <div class='center'>
		<div id='meaningDisp' class='bold'></div>
	  </div>
	  
	  <div id='info-disp' style='width:300px; padding-left:50px;'></div>
  </div>
</body>

<script>
	var viewPosition = 1;
    var dataTrack = {};
    let count=1;
	for (kanji in etymologies){
	  dataTrack[count]=kanji;
	  count+=1;
	};
	for (kanji in dataTrack){
	    etymologies[dataTrack[kanji]]["num"]=parseInt(kanji);
	};
	
	var kanjiInput = document.getElementById('input');
	var kanjiDisp = document.getElementById('kanji-disp');
	var kanjiInfo = document.getElementById('info-disp');
	var jishoLink = document.getElementById('jisho-link');
	
	var search = function(){
		let kanji=null;
		if (parseInt(kanjiInput.value).toString()!='NaN'){
		    kanji = dataTrack[parseInt(kanjiInput.value)];
			viewPosition = parseInt(kanjiInput.value);
		} else {
		    kanji=kanjiInput.value;
			viewPosition=etymologies[kanji].num;
		}
		display(kanji);
	}
	
	var left = function(){
		if (viewPosition==1){
		    viewPosition=1945;
		}
		else {
		    viewPosition-=1;
		}
		display(dataTrack[viewPosition]);
	};
	var right = function(){
		if (viewPosition==1945){
		    viewPosition=1;
		}
		else {
		    viewPosition+=1;
		};
		display(dataTrack[viewPosition]);
	}
	
	var display = function(kanji){
		reset();
		kanjiDisp.innerHTML=kanji;
		meaningDisp.innerHTML+= "(" + etymologies[kanji].meanings + ")</br></br>";
		kanjiInfo.innerHTML+=etymologies[kanji].etymology + "</br></br>";
		kanjiInfo.innerHTML+=etymologies[kanji].mnemonic + "</br></br>";
		kanjiInfo.innerHTML+= "<b>On</b>: " + etymologies[kanji].readings.kun + "</br></br>";
		kanjiInfo.innerHTML+= "<b>Kun</b>: " + etymologies[kanji].readings.on + "</br></br>";
		jishoLink.innerHTML+= "<A href=\"https://www.jisho.org/search/" + kanji + "%20%23kanji\"  target=\"_blank\">jisho</A>";
	};
	var setup = function(){
	    display('ä¸€');
	};
	var reset = function(){
	    kanjiDisp.innerHTML='';
		meaningDisp.innerHTML='';
		kanjiInfo.innerHTML='';
		jishoLink.innerHTML='';
	};
</script>
</html>
